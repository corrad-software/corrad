generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model assistant {
  assistantID               Int       @id @default(autoincrement())
  assistantProviderID       String?   @db.VarChar(255)
  assistantImg              String?   @db.VarChar(255)
  assistantIcon             String?   @db.VarChar(255)
  assistantIconColour       String?   @db.VarChar(255)
  assistantName             String?   @db.VarChar(255)
  assistantDescription      String?   @db.VarChar(255)
  assistantType             Int?
  assistantStatus           String?   @db.VarChar(255)
  assistantVerified         Boolean?  @db.Bit(1)
  assistantGenerateQuestion Boolean?  @default(dbgenerated("b'1'")) @db.Bit(1)
  assistantCreatedDate      DateTime? @db.DateTime(0)
  assistantModifiedDate     DateTime? @db.DateTime(0)
  lookup                    lookup?   @relation(fields: [assistantType], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "assistant_ibfk_1")
  thread                    thread[]

  @@index([assistantType], map: "assistantType")
}

model audit {
  auditID          Int       @id @default(autoincrement())
  auditIP          String?   @db.VarChar(255)
  auditURL         String?   @db.VarChar(255)
  auditURLMethod   String?   @db.VarChar(255)
  auditURLPayload  String?   @db.VarChar(255)
  auditCreatedDate DateTime? @db.DateTime(0)
}

model chat {
  chatID                Int        @id @default(autoincrement())
  userID                Int?
  threadID              Int?
  projectID             Int?
  chatProviderMessageID String?    @unique(map: "chatOAIMessageID") @db.VarChar(255)
  chatType              String?    @db.VarChar(255)
  chatRole              String?    @db.VarChar(255)
  chatMessage           String?    @db.LongText
  chatMetadata          Json?
  chatCreatedDate       DateTime?  @db.DateTime(0)
  chatModifiedDate      DateTime?  @db.DateTime(0)
  user                  user?      @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "chat_ibfk_1")
  thread                thread?    @relation(fields: [threadID], references: [threadID], onDelete: NoAction, onUpdate: NoAction, map: "chat_ibfk_2")
  project               project?   @relation(fields: [projectID], references: [projectID], onDelete: NoAction, onUpdate: NoAction, map: "chat_ibfk_3")
  chatFile              chatFile[]

  @@index([projectID], map: "projectID")
  @@index([threadID], map: "threadID")
  @@index([userID], map: "userID")
}

model chatFile {
  chatFileID Int   @id @default(autoincrement())
  fileID     Int?
  chatID     Int?
  file       file? @relation(fields: [fileID], references: [fileID], onDelete: NoAction, onUpdate: NoAction, map: "chatFile_ibfk_1")
  chat       chat? @relation(fields: [chatID], references: [chatID], onDelete: NoAction, onUpdate: NoAction, map: "chatFile_ibfk_2")

  @@index([chatID], map: "chatID")
  @@index([fileID], map: "fileID")
}

model collection_item {
  itemID             Int       @id @default(autoincrement())
  userID             Int?
  projectID          Int?
  itemUniqueID       String?   @db.VarChar(255)
  itemCollectionName String?   @db.VarChar(255)
  itemName           String?   @db.VarChar(255)
  itemType           String?   @db.VarChar(255)
  itemCreatedDate    DateTime? @db.DateTime(0)
  itemModifiedDate   DateTime? @db.DateTime(0)
  user               user?     @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "collection_item_ibfk_1")
  project            project?  @relation(fields: [projectID], references: [projectID], onDelete: NoAction, onUpdate: NoAction, map: "collection_item_ibfk_2")

  @@index([projectID], map: "projectID")
  @@index([userID], map: "userID")
}

model configuration {
  configurationID           Int       @id @default(autoincrement())
  configurationName         String?   @db.VarChar(255)
  configurationCode         String?   @unique(map: "configurationCode") @db.VarChar(255)
  configurationType         String?   @db.VarChar(255)
  configurationValue        String?   @db.VarChar(255)
  configurationCreatedDate  DateTime? @db.DateTime(0)
  configurationModifiedDate DateTime? @db.DateTime(0)
}

model document_template {
  templateID           Int       @id @default(autoincrement())
  userID               Int?
  templateName         String?   @db.VarChar(255)
  templateDescription  String?   @db.VarChar(255)
  templateType         String?   @db.VarChar(255)
  headerContent        String?   @db.LongText
  footerContent        String?   @db.LongText
  firstPageContent     String?   @db.LongText
  lastPageContent      String?   @db.LongText
  bodyContent          String?   @db.LongText
  templateMetadata     String?   @db.VarChar(255)
  templateStatus       String?   @db.VarChar(255)
  templateCreatedDate  DateTime? @db.DateTime(0)
  templateModifiedDate DateTime? @db.DateTime(0)
  user                 user?     @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "document_template_ibfk_1")

  @@index([userID], map: "userID")
}

model documentation {
  documentationID           Int       @id @default(autoincrement())
  documentationContent      String?   @db.LongText
  documentationCreatedDate  DateTime? @db.DateTime(0)
  documentationModifiedDate DateTime? @db.DateTime(0)
}

model file {
  fileID           Int        @id @default(autoincrement())
  fileProviderID   String?    @unique(map: "fileOAIID") @db.VarChar(255)
  fileName         String?    @db.VarChar(255)
  fileOriginalName String?    @db.VarChar(255)
  fileType         String?    @db.VarChar(255)
  fileURL          String?    @db.VarChar(255)
  fileBytes        Int?
  fileCreatedDate  DateTime?  @db.DateTime(0)
  fileModifiedDate DateTime?  @db.DateTime(0)
  chatFile         chatFile[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model guide_chat {
  guideChatID               Int       @id @default(autoincrement())
  guideChatModel            Int?
  guideChatName             String?   @db.VarChar(255)
  guideChatDescription      String?   @db.VarChar(255)
  guideChatType             String?   @db.VarChar(255)
  guideChatContext          String?   @db.LongText
  guideChatStatus           String?   @db.VarChar(255)
  guideChatGenerateQuestion Boolean?  @default(dbgenerated("b'0'")) @db.Bit(1)
  guideChatCreatedDate      DateTime? @db.DateTime(0)
  guideChatModifiedDate     DateTime? @db.DateTime(0)
  lookup                    lookup?   @relation(fields: [guideChatModel], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "guide_chat_ibfk_1")
  thread                    thread[]

  @@index([guideChatModel], map: "guideChatModel")
}

model lookup {
  lookupID                                Int          @id @default(autoincrement())
  lookupOrder                             Int?
  lookupTitle                             String?      @db.VarChar(255)
  lookupRefCode                           String?      @db.VarChar(255)
  lookupValue                             String?      @db.VarChar(255)
  lookupType                              String?      @db.VarChar(255)
  lookupStatus                            String?      @db.VarChar(255)
  lookupCreatedDate                       DateTime?    @db.DateTime(0)
  lookupModifiedDate                      DateTime?    @db.DateTime(0)
  assistant                               assistant[]
  guide_chat                              guide_chat[]
  project_project_projectTypeTolookup     project[]    @relation("project_projectTypeTolookup")
  project_project_projectViewTypeTolookup project[]    @relation("project_projectViewTypeTolookup")
  thread                                  thread[]
  thread_thread_providerIDTolookup        thread[]     @relation("thread_providerIDTolookup")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model project {
  projectID                                                          Int                  @id @default(autoincrement())
  projectUniqueID                                                    String               @unique(map: "projectUniqueID") @db.VarChar(255)
  userID                                                             Int?
  projectName                                                        String?              @db.VarChar(255)
  projectDescription                                                 String?              @db.VarChar(255)
  projectDefault                                                     Boolean?             @default(dbgenerated("b'0'")) @db.Bit(1)
  projectType                                                        Int?
  projectPublic                                                      Boolean?             @db.Bit(1)
  projectViewType                                                    Int?
  projectCreatedDate                                                 DateTime?            @db.DateTime(0)
  projectModifiedDate                                                DateTime?            @db.DateTime(0)
  chat                                                               chat[]
  collection_item                                                    collection_item[]
  user                                                               user?                @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "project_ibfk_2")
  lookup_project_projectTypeTolookup                                 lookup?              @relation("project_projectTypeTolookup", fields: [projectType], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "project_ibfk_3")
  lookup_project_projectViewTypeTolookup                             lookup?              @relation("project_projectViewTypeTolookup", fields: [projectViewType], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "project_ibfk_4")
  project_permission_project_permission_projectPermissionIDToproject project_permission?  @relation("project_permission_projectPermissionIDToproject")
  project_permission_project_permission_projectIDToproject           project_permission[] @relation("project_permission_projectIDToproject")
  repository                                                         repository[]

  @@index([projectType], map: "projectType")
  @@index([projectViewType], map: "projectViewType")
  @@index([userID], map: "userID")
}

model project_permission {
  projectPermissionID                                     Int       @id @default(autoincrement())
  userID                                                  Int?
  roleID                                                  Int?
  projectID                                               Int?
  projectPermissionStatus                                 String?   @db.VarChar(255)
  projectPermissionCreatedDate                            DateTime? @db.DateTime(0)
  projectPermissionModifiedDate                           DateTime? @db.DateTime(0)
  project_project_permission_projectPermissionIDToproject project   @relation("project_permission_projectPermissionIDToproject", fields: [projectPermissionID], references: [projectID], onDelete: NoAction, onUpdate: NoAction, map: "project_permission_ibfk_1")
  user                                                    user?     @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "project_permission_ibfk_2")
  role                                                    role?     @relation(fields: [roleID], references: [roleID], onDelete: NoAction, onUpdate: NoAction, map: "project_permission_ibfk_3")
  project_project_permission_projectIDToproject           project?  @relation("project_permission_projectIDToproject", fields: [projectID], references: [projectID], onDelete: NoAction, onUpdate: NoAction, map: "project_permission_ibfk_4")

  @@index([projectID], map: "projectID")
  @@index([roleID], map: "roleID")
  @@index([userID], map: "userID")
}

model repository {
  repositoryID           Int       @id @default(autoincrement())
  projectID              Int?
  repositoryName         String?   @db.VarChar(255)
  repositoryDescription  String?   @db.VarChar(255)
  repositoryVersion      String?   @db.VarChar(255)
  repositoryContent      String?   @db.LongText
  repositoryStatus       String?   @db.VarChar(255)
  repositoryCreatedDate  DateTime? @db.DateTime(0)
  repositoryModifiedDate DateTime? @db.DateTime(0)
  project                project?  @relation(fields: [projectID], references: [projectID], onDelete: NoAction, onUpdate: NoAction, map: "repository_ibfk_1")

  @@index([projectID], map: "projectID")
  @@index([repositoryStatus], map: "repositoryStatus")
}

model role {
  roleID             Int                  @id @default(autoincrement())
  roleName           String?              @db.VarChar(255)
  roleDescription    String?              @db.VarChar(255)
  roleStatus         String?              @db.VarChar(255)
  roleCreatedDate    DateTime?            @db.DateTime(0)
  roleModifiedDate   DateTime?            @db.DateTime(0)
  project_permission project_permission[]
  userrole           userrole[]
}

model saved_prompt {
  promptID           Int       @id @default(autoincrement())
  userID             Int?
  promptTitle        String?   @db.VarChar(255)
  promptContent      String?   @db.LongText
  promptDescription  String?   @db.VarChar(255)
  promptTags         String?   @db.VarChar(255)
  promptStatus       String?   @db.VarChar(255)
  promptCreatedDate  DateTime? @db.DateTime(0)
  promptModifiedDate DateTime? @db.DateTime(0)
  user               user?     @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "saved_prompt_ibfk_1")

  @@index([userID], map: "userID")
}

model thread {
  threadID                         Int         @id @default(autoincrement())
  userID                           Int?
  assistantID                      Int?
  guideChatID                      Int?
  providerID                       Int?
  collectionName                   String?     @db.VarChar(255)
  threadTitle                      String?     @db.VarChar(255)
  threadProviderID                 String?     @unique(map: "threadOAIID") @db.VarChar(255)
  threadSourceType                 String?     @db.VarChar(255)
  threadStatus                     Int?
  threadCreatedDate                DateTime?   @db.DateTime(0)
  threadModifiedDate               DateTime?   @db.DateTime(0)
  chat                             chat[]
  assistant                        assistant?  @relation(fields: [assistantID], references: [assistantID], onDelete: NoAction, onUpdate: NoAction, map: "thread_ibfk_1")
  user                             user?       @relation(fields: [userID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "thread_ibfk_2")
  lookup                           lookup?     @relation(fields: [threadStatus], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "thread_ibfk_3")
  lookup_thread_providerIDTolookup lookup?     @relation("thread_providerIDTolookup", fields: [providerID], references: [lookupID], onDelete: NoAction, onUpdate: NoAction, map: "thread_ibfk_4")
  guide_chat                       guide_chat? @relation(fields: [guideChatID], references: [guideChatID], onDelete: NoAction, onUpdate: NoAction, map: "thread_ibfk_5")

  @@index([assistantID], map: "assistantID")
  @@index([threadStatus], map: "threadStatus")
  @@index([userID], map: "userID")
  @@index([guideChatID], map: "guideChatID")
  @@index([providerID], map: "providerID")
}

model user {
  userID             Int                  @id @default(autoincrement())
  userSecretKey      String?              @db.VarChar(255)
  userUsername       String?              @unique(map: "userUsername") @db.VarChar(255)
  userPassword       String?              @db.VarChar(255)
  userFullName       String?              @db.VarChar(255)
  userEmail          String?              @db.VarChar(255)
  userPhone          String?              @db.VarChar(255)
  userStatus         String?              @db.VarChar(255)
  userCreatedDate    DateTime?            @db.DateTime(0)
  userModifiedDate   DateTime?            @db.DateTime(0)
  chat               chat[]
  collection_item    collection_item[]
  document_template  document_template[]
  project            project[]
  project_permission project_permission[]
  saved_prompt       saved_prompt[]
  thread             thread[]
  userrole           userrole[]
}

model userrole {
  userRoleID          Int      @id @default(autoincrement())
  userRoleUserID      Int      @default(0)
  userRoleRoleID      Int      @default(0)
  userRoleCreatedDate DateTime @db.DateTime(0)
  role                role     @relation(fields: [userRoleRoleID], references: [roleID], onDelete: NoAction, onUpdate: NoAction, map: "FK_userrole_role")
  user                user     @relation(fields: [userRoleUserID], references: [userID], onDelete: NoAction, onUpdate: NoAction, map: "FK_userrole_user")

  @@index([userRoleRoleID], map: "FK_userrole_role")
  @@index([userRoleUserID], map: "FK_userrole_user")
}
